#include "eastl_allocator.h"
#include "memory.h"

namespace lambda
{
  namespace foundation
  {
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    EASTLAllocator::EASTLAllocator(const char* pName)
    {
#if EASTL_NAME_ENABLED
      mpName = pName ? pName : EASTL_ALLOCATOR_DEFAULT_NAME;
#endif
    }

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    EASTLAllocator::EASTLAllocator(
      const eastl::allocator& x,
      const char* pName) 
    {
#if EASTL_NAME_ENABLED
      mpName = pName ? pName : EASTL_ALLOCATOR_DEFAULT_NAME;
#endif
    }

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    EASTLAllocator::~EASTLAllocator()
    {

    }

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    EASTLAllocator& EASTLAllocator::operator=(const EASTLAllocator& x)
    {
      return *this;
    }

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    bool EASTLAllocator::operator==(const EASTLAllocator& x)
    {
      return true;
    }

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    bool EASTLAllocator::operator!=(const EASTLAllocator& x)
    {
      return false;
    }

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    void* EASTLAllocator::allocate(size_t n, int flags)
    {
      return Memory::allocate(n);
    }

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    void* EASTLAllocator::allocate(size_t n, size_t alignment, size_t offset, int flags)
    {
      return Memory::allocate(n , alignment);
    }

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    void EASTLAllocator::deallocate(void* p, size_t n)
    {
      Memory::deallocate(p);
    }

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    void EASTLAllocator::set_name(const char* pName)
    {
#if EASTL_NAME_ENABLED
      mpName = pName;
#endif
    }

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    const char* EASTLAllocator::get_name() const
    {
#if EASTL_NAME_ENABLED
      return mpName;
#else
      return "Custom EASTL allocator";
#endif
    }
  }
}